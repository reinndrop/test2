<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>VG Art â€” Tebak Kata</title>
<style>
  :root{ --slot:64px; --gap:10px; }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:#0b1220;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial}

  .stage{
    position:relative; width:min(100vw, 600px); aspect-ratio:1080/1920; margin:0 auto;
    background: radial-gradient(1200px 900px at 50% 20%, rgba(0,0,0,.12), rgba(0,0,0,.35)), #0b1220 center/cover no-repeat;
    border-radius:24px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.5);
  }
  .stage.has-bg{
    background-image:
      radial-gradient(1200px 900px at 50% 20%, rgba(0,0,0,.12), rgba(0,0,0,.35)),
      url("assets/bg.png");
    background-size:cover; background-position:center;
  }

  /* POSISI PANEL: balik ke 32% seperti yang kamu minta */
.panel{
  position:absolute; left:6%; right:6%;
  top:32%;  /* naikin dikit dari 32% */
  bottom:12%;
  display:flex; flex-direction:column; gap:14px;
  background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.08));
  border:1px solid rgba(255,255,255,.16);
  border-radius:20px; backdrop-filter: blur(6px); padding:16px;
}

  .topbar{display:flex;justify-content:space-between;align-items:center;font-weight:800;letter-spacing:.3px;margin-top:6px}
  .badge{background:rgba(255,255,255,.12);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.22);font-size:14px}
  .score{background:rgba(0,209,255,.25);border:1px solid rgba(0,209,255,.55);font-size:18px;padding:10px 14px}

  .question{margin-top:4px;font-weight:800;line-height:1.25;font-size:clamp(16px,2.4vw,26px);text-shadow:0 2px 6px rgba(0,0,0,.45)}

  .answer{display:flex;justify-content:center;gap:var(--gap);padding:8px 0 4px;flex-wrap:nowrap;overflow:hidden}
  .slot{
    width:var(--slot); height:var(--slot); display:grid; place-items:center;
    border-radius:14px; border:2px solid rgba(255,255,255,.75);
    background:rgba(255,255,255,.08); box-shadow:inset 0 2px 8px rgba(0,0,0,.35);
    font-weight:900; font-size:calc(var(--slot) * .42);
  }

  .letters{margin-top:8px; display:grid; grid-template-columns:repeat(6,1fr); gap:10px}
.btn-letter{
  height:40px; /* sebelumnya 56px */
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
  box-shadow:0 8px 24px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.08);
  font-weight:900;
  font-size:18px; /* sebelumnya 22px */
  color:#fff;
  display:grid;place-items:center;
  user-select:none;cursor:pointer;
  transition:transform .05s ease;
}
  .btn-letter:active{transform:translateY(1px) scale(.99)}
  .btn-letter.disabled{opacity:.35;pointer-events:none}

  .actions{display:flex;gap:12px;margin-top:auto;margin-bottom:10px}
  .btn{
    flex:1;height:56px;border-radius:16px;border:1px solid rgba(255,255,255,.22);
    background:linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.04));
    color:#fff;font-weight:800;letter-spacing:.3px;cursor:pointer;box-shadow:0 10px 26px rgba(0,0,0,.35)
  }
  .btn.danger{background:linear-gradient(180deg, #f04438, #c81e14)}
  .btn.primary{background:linear-gradient(180deg, #00d1ff, #0098ff);border-color:rgba(255,255,255,.35)}

  .endscreen{position:absolute;inset:0;display:none;place-items:center;text-align:center;background:rgba(0,0,0,.4);backdrop-filter:blur(4px);padding:24px}
  .card{
    width:min(92%,520px);background:linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,.35));
    border:1px solid rgba(255,255,255,.2);border-radius:22px;padding:24px;color:#fff;box-shadow:0 20px 50px rgba(0,0,0,.55)
  }
  .card h2{margin:0 0 10px;font-size:28px}
  .card p{margin:8px 0;opacity:.95}
  .cta{margin-top:14px;font-weight:800;background:linear-gradient(180deg,#22c55e,#16a34a);border:1px solid rgba(255,255,255,.3);color:#fff;padding:12px 16px;border-radius:14px;display:inline-block}
</style>
</head>
<body>
  <div id="stage" class="stage">
    <div class="panel" id="panel">
      <div class="topbar">
        <div class="badge" id="progress">Pertanyaan 1/5</div>
        <div class="badge score" id="score">Skor: 0</div>
      </div>

      <div class="question" id="question"></div>
      <div class="answer" id="answer"></div>
      <div class="letters" id="letters"></div>

      <div class="actions">
        <button class="btn danger" id="btnUndo">Hapus</button>
        <button class="btn primary" id="btnSubmit">Submit</button>
      </div>
    </div>

    <div class="endscreen" id="end">
      <div class="card">
        <h2>Skor Akhir</h2>
        <div style="font-size:40px;font-weight:900;letter-spacing:1px" id="finalScore">0</div>
        <p>Screenshot layar ini lalu post di <b>Instagram Story</b> dan tag <b>@vivagoal</b> ðŸ”¥</p>
        <button class="cta" id="btnReplay">Main Lagi</button>
      </div>
    </div>
  </div>

<script>
/* ====== Soal ====== */
const levels = [
  { q: "Ibukota negara Jepang", a: "TOKYO" },
  { q: "Julukan olahraga: si kulit ____", a: "BUNDAR" },
  { q: "Nama lain timnas Indonesia: Garuda ____", a: "PANCASILA" },
  { q: "Jumlah pemain sepakbola satu tim di lapangan", a: "SEBELAS" },
  { q: "Tendangan penalti dalam bahasa Inggris", a: "PENALTY" }
];

/* ====== Elemen ====== */
const elStage = document.getElementById('stage');
const elPanel = document.getElementById('panel');
const elQuestion= document.getElementById('question');
const elAnswer  = document.getElementById('answer');
const elLetters = document.getElementById('letters');
const elScore   = document.getElementById('score');
const elProgress= document.getElementById('progress');
const elEnd     = document.getElementById('end');
const elFinal   = document.getElementById('finalScore');
const btnUndo   = document.getElementById('btnUndo');
const btnSubmit = document.getElementById('btnSubmit');
const btnReplay = document.getElementById('btnReplay');

/* Aktifkan background jika assets/bg.png tersedia */
(function(){
  const img = new Image();
  img.onload = () => elStage.classList.add('has-bg');
  img.src = "assets/bg.png";
})();

/* ====== State & Utils ====== */
let idx = 0;           // index soal
let score = 0;         // 0..100 (kelipatan 20)
let slots = [];

const rand = (min, max) => Math.floor(Math.random()*(max-min+1))+min;
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){const j=rand(0,i); [arr[i],arr[j]]=[arr[j],arr[i]]} return arr; }
function makePool(answer){
  const letters = answer.replace(/\s+/g,'').toUpperCase().split('');
  const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
  while(letters.length < Math.max(12, answer.length + 4)){
    letters.push(alphabet[rand(0, alphabet.length-1)]);
  }
  return shuffle(letters).slice(0, Math.max(12, answer.length + 4));
}
function setSlotSizeForOneRow(n){
  const pad = 16*2;
  const gap = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--gap'));
  const avail = elPanel.clientWidth - pad - (n-1)*gap;
  const size = Math.max(42, Math.min(72, Math.floor(avail / n)));
  document.documentElement.style.setProperty('--slot', size + 'px');
}

/* ====== Render Soal ====== */
function renderLevel(){
  const L = levels[idx];
  elProgress.textContent = `Pertanyaan ${idx+1}/${levels.length}`;
  elScore.textContent = `Skor: ${score}`;
  elQuestion.textContent = L.q;

  elAnswer.innerHTML = '';
  slots = [];
  const answerClean = L.a.toUpperCase().replace(/\s+/g,'');
  setSlotSizeForOneRow(answerClean.length);
  for(let i=0;i<answerClean.length;i++){
    const slot = document.createElement('div');
    slot.className = 'slot';
    slot.textContent = '';
    elAnswer.appendChild(slot);
    slots.push(slot);
  }

  const pool = makePool(L.a);
  elLetters.innerHTML = '';
  pool.forEach(ch=>{
    const b = document.createElement('div');
    b.className = 'btn-letter';
    b.textContent = ch;
    b.addEventListener('click', ()=> placeLetter(b, ch));
    elLetters.appendChild(b);
  });
}

/* ====== Interaksi ====== */
function placeLetter(btn, ch){
  const target = slots.find(s => s.textContent==='');
  if(!target) return;
  target.textContent = ch;
  btn.classList.add('disabled'); btn.dataset.used = "1";
}

btnUndo.onclick = ()=>{
  for(let i=slots.length-1; i>=0; i--){
    const s = slots[i];
    if(s.textContent!==''){
      const ch = s.textContent; s.textContent = '';
      const btn = [...elLetters.children].find(b => b.textContent===ch && b.dataset.used==="1");
      if(btn){ btn.classList.remove('disabled'); btn.dataset.used=""; break; }
    }
  }
};

btnSubmit.onclick = ()=>{
  const L = levels[idx];
  const formed = slots.map(s => s.textContent).join('');
  const answer = L.a.toUpperCase().replace(/\s+/g,'');

  // Belum penuh ATAU salah â†’ salah, tampilkan jawaban & lanjut
  if(formed.length < answer.length || formed !== answer){
    showCorrectThenNext(answer);
    return;
  }

  // Benar â†’ tambah 20 poin
  score += 20;
  elScore.textContent = `Skor: ${score}`;
  flash(elAnswer,'rgba(54,211,153,.35)');
  setTimeout(nextLevel, 450);
};

function showCorrectThenNext(answer){
  slots.forEach((s,i)=> s.textContent = answer[i] || '');
  flash(elAnswer,'rgba(240,68,56,.35)');
  setTimeout(nextLevel, 900);
}

/* ====== Helpers ====== */
function flash(el, color){
  el.style.boxShadow = `0 0 0 9999px ${color} inset`;
  setTimeout(()=> el.style.boxShadow = '', 220);
}
function nextLevel(){
  idx++;
  if(idx >= levels.length){
    elFinal.textContent = `${score}`;
    elEnd.style.display = 'grid';
  }else{
    renderLevel();
  }
}
btnReplay.onclick = ()=>{
  idx = 0; score = 0;
  elEnd.style.display = 'none';
  renderLevel();
};

/* Start */
renderLevel();
addEventListener('resize', ()=> {
  const a = levels[idx].a.toUpperCase().replace(/\s+/g,'');
  setSlotSizeForOneRow(a.length);
});
</script>
</body>
</html>
