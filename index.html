<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>VG Art â€” Tebak Kata</title>
<style>
  :root{ --slot:64px; --gap:10px; }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:#0b1220;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial}

  .stage{
    position:relative; width:min(100vw, 600px); aspect-ratio:1080/1920; margin:0 auto;
    background: radial-gradient(1200px 900px at 50% 20%, rgba(0,0,0,.12), rgba(0,0,0,.35)), #0b1220 center/cover no-repeat;
    border-radius:24px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.5);
  }
  .stage.has-bg{
    background-image:
      radial-gradient(1200px 900px at 50% 20%, rgba(0,0,0,.12), rgba(0,0,0,.35)),
      url("assets/bg.png");
    background-size:cover; background-position:center;
  }

  /* Panel */
  .panel{
    position:absolute; left:6%; right:6%;
    top:31%; bottom:4%;
    display:flex; flex-direction:column; gap:14px;
    background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.08));
    border:1px solid rgba(255,255,255,.16);
    border-radius:20px; backdrop-filter: blur(6px); padding:16px;
  }

  .topbar{display:flex;justify-content:space-between;align-items:center;font-weight:800;letter-spacing:.3px;margin-top:6px}
  .badge{background:rgba(255,255,255,.12);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.22);font-size:14px}
  .score{background:rgba(0,209,255,.25);border:1px solid rgba(0,209,255,.55);font-size:18px;padding:10px 14px}

  /* Pertanyaan: diperkecil dikit */
  .question{
    margin-top:2px;
    font-weight:800;
    line-height:1.25;
    font-size:clamp(15px, 2.1vw, 21px);
    text-shadow:0 2px 6px rgba(0,0,0,.45);
    text-align:center;
  }

  .answer{display:flex;justify-content:center;gap:var(--gap);padding:8px 0 4px;flex-wrap:nowrap;overflow:hidden}
  .slot{
    width:var(--slot); height:var(--slot); display:grid; place-items:center;
    border-radius:14px; border:2px solid rgba(255,255,255,.75);
    background:rgba(255,255,255,.08); box-shadow:inset 0 2px 8px rgba(0,0,0,.35);
    font-weight:900; font-size:calc(var(--slot) * .42);
  }

  .letters{margin-top:8px; display:grid; grid-template-columns:repeat(6,1fr); gap:10px}
  .btn-letter{
    height:48px; border-radius:12px;
    border:1px solid rgba(255,255,255,.2);
    background:linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
    box-shadow:0 8px 24px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.08);
    font-weight:900; font-size:20px; color:#fff;
    display:grid; place-items:center; user-select:none; cursor:pointer;
    transition:transform .05s ease;
  }
  .btn-letter:active{transform:translateY(1px) scale(.99)}
  .btn-letter.disabled{opacity:.35;pointer-events:none}

  .actions{display:flex;gap:12px;margin-top:auto;margin-bottom:10px}
  .btn{
    flex:1;height:56px;border-radius:16px;border:1px solid rgba(255,255,255,.22);
    background:linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.04));
    color:#fff;font-weight:800;letter-spacing:.3px;cursor:pointer;box-shadow:0 10px 26px rgba(0,0,0,.35)
  }
  .btn.danger{background:linear-gradient(180deg, #f04438, #c81e14)}
  .btn.primary{background:linear-gradient(180deg, #00d1ff, #0098ff);border-color:rgba(255,255,255,.35)}
  .btn.neutral{background:linear-gradient(180deg, #6b7280, #4b5563)} /* Skip */

  .btn:disabled{opacity:.45; cursor:not-allowed; filter:grayscale(.3)}

  .endscreen{position:absolute;inset:0;display:none;place-items:center;text-align:center;background:rgba(0,0,0,.4);backdrop-filter:blur(4px);padding:24px}
  .card{
    width:min(92%,520px);background:linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,.35));
    border:1px solid rgba(255,255,255,.2);border-radius:22px;padding:24px;color:#fff;box-shadow:0 20px 50px rgba(0,0,0,.55)
  }
  .card h2{margin:0 0 10px;font-size:28px}
  .card p{margin:8px 0;opacity:.95}
  .cta{margin-top:14px;font-weight:800;background:linear-gradient(180deg,#22c55e,#16a34a);border:1px solid rgba(255,255,255,.3);color:#fff;padding:12px 16px;border-radius:14px;display:inline-block}

  @media (max-width:400px){
    .btn-letter{height:44px;font-size:18px}
    :root{ --gap: 8px }
  }
</style>
</head>
<body>
  <div id="stage" class="stage">
    <div class="panel" id="panel">
      <div class="topbar">
        <div class="badge" id="progress">Pertanyaan 1/5</div>
        <div class="badge score" id="score">Skor: 0</div>
      </div>

      <div class="question" id="question"></div>
      <div class="answer" id="answer"></div>
      <div class="letters" id="letters"></div>

      <div class="actions">
        <button class="btn danger" id="btnUndo">Hapus</button>
        <button class="btn neutral" id="btnSkip">Skip</button>
        <button class="btn primary" id="btnSubmit" disabled>Submit</button>
      </div>
    </div>

    <div class="endscreen" id="end">
      <div class="card">
        <h2>Skor Akhir</h2>
        <div style="font-size:40px;font-weight:900;letter-spacing:1px" id="finalScore">0</div>
        <p>Screenshot layar ini lalu post di <b>Instagram Story</b> dan tag <b>@vivagoal</b> ðŸ”¥</p>
        <button class="cta" id="btnReplay">Main Lagi</button>
      </div>
    </div>
  </div>

<script>
/* ====== 20 Soal ====== */
const QUESTION_POOL = [
  { q: "Siapa pemain yang dijuluki â€œEl Locoâ€?", a: "GONZALES" },
  { q: "Sebutkan tahun debut Indonesia di Piala Asia?", a: "1996" },
  { q: "Apa warna utama jersey kandang Timnas?", a: "MERAH" },
  { q: "Siapa nama kiper Timnas di final SEA Games 2023?", a: "ERNANDO" },
  { q: "Siapa nama pemain Timnas di Jeonbuk tahun 2024?", a: "ASNAWI" },
  { q: "Negara apa lawan Indonesia di final SEA Games 2023?", a: "THAILAND" },
  { q: "PSSI didirikan pada tahun?", a: "1930" },
  { q: "Timnas Indonesia dijuluki ___ Muda", a: "GARUDA" },
  { q: "Timnas Indonesia U-23 dilatih oleh ___ Vanenburg", a: "GERALD" },
  { q: "Jumlah minimal pemain dalam adu penalti?", a: "Tujuh" }, // update permintaanmu
  { q: "Ketua PSSI era 2015 adalah La ___ Mattalitti", a: "NYALLA" },
  { q: "Berapa jumlah gol Indonesia di fase grup Piala Asia 2023?", a: "TIGA" },
  { q: "Posisi offside ditentukan saat bola di-___", a: "Passing" },
  { q: "Tahun berapa Indonesia pertama kali menang di Piala Asia?", a: "2007" },
  { q: "Negara yang mengalahkan Indonesia di final Piala Kemerdekaan 1987?", a: "KOREA" },
  { q: "Minimal pemain di lapangan agar pertandingan sah?", a: "TUJUH" },
  { q: "Jumlah maksimal pergantian pemain di laga resmi FIFA?", a: "LIMA" },
  { q: "Tendangan pertama di awal laga disebut?", a: "KICK OFF" },
  { q: "Pelanggaran menarik baju lawan disebut?", a: "HOLDING" },
  { q: "Maksimal panjang lapangan internasional (meter)?", a: "105" }
];

/* ====== Ambil 5 random unik ====== */
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr; }
const levels = shuffle([...QUESTION_POOL]).slice(0,5);

/* ====== Elemen ====== */
const elStage = document.getElementById('stage');
const elPanel = document.getElementById('panel');
const elQuestion= document.getElementById('question');
const elAnswer  = document.getElementById('answer');
const elLetters = document.getElementById('letters');
const elScore   = document.getElementById('score');
const elProgress= document.getElementById('progress');
const elEnd     = document.getElementById('end');
const elFinal   = document.getElementById('finalScore');
const btnUndo   = document.getElementById('btnUndo');
const btnSkip   = document.getElementById('btnSkip');
const btnSubmit = document.getElementById('btnSubmit');
const btnReplay = document.getElementById('btnReplay');

/* Aktifkan background jika ada */
(function(){
  const img = new Image();
  img.onload = () => elStage.classList.add('has-bg');
  img.src = "assets/bg.png";
})();

/* ====== State ====== */
let idx = 0;      // 0..4
let score = 0;    // 0..100
let slots = [];

/* ====== Utils ====== */
const rand = (min, max) => Math.floor(Math.random()*(max-min+1))+min;

function makePool(answer){
  const core = answer.replace(/\s+/g,'').toUpperCase();
  const base = core.split('');
  const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
  const numbers = "0123456789".split('');

  const isNumericOnly = /^[0-9]+$/.test(core);   // angka murni â†’ hanya angka
  const useNumbers = /\d/.test(core);            // campuran huruf+angka
  let source = isNumericOnly ? numbers : (useNumbers ? alphabet.concat(numbers) : alphabet);

  const desired = Math.max(12, core.length + 4);
  const pool = base.slice();
  while (pool.length < desired){
    pool.push(source[Math.floor(Math.random()*source.length)]);
  }
  // acak
  for (let i=pool.length-1; i>0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [pool[i], pool[j]] = [pool[j], pool[i]];
  }
  return pool;
}

function setSlotSizeForOneRow(n){
  const pad = 16*2;
  const gap = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--gap'));
  const avail = elPanel.clientWidth - pad - (n-1)*gap;
  const size = Math.max(42, Math.min(72, Math.floor(avail / n)));
  document.documentElement.style.setProperty('--slot', size + 'px');
}

function slotsFilled(){
  return slots.every(s => s.textContent && s.textContent.length === 1);
}
function updateSubmitState(){
  btnSubmit.disabled = !slotsFilled();
}

/* ====== Render Soal ====== */
function renderLevel(){
  const L = levels[idx];
  elProgress.textContent = `Pertanyaan ${idx+1}/${levels.length}`;
  elScore.textContent = `Skor: ${score}`;
  elQuestion.textContent = L.q;

  elAnswer.innerHTML = '';
  slots = [];
  const answerClean = L.a.toUpperCase().replace(/\s+/g,'');
  setSlotSizeForOneRow(answerClean.length);
  for(let i=0;i<answerClean.length;i++){
    const slot = document.createElement('div');
    slot.className = 'slot';
    slot.textContent = '';
    elAnswer.appendChild(slot);
    slots.push(slot);
  }

  const pool = makePool(L.a);
  elLetters.innerHTML = '';
  pool.forEach(ch=>{
    const b = document.createElement('div');
    b.className = 'btn-letter';
    b.textContent = ch;
    b.addEventListener('click', ()=> { placeLetter(b, ch); });
    elLetters.appendChild(b);
  });

  updateSubmitState(); // pastikan submit diawal disabled
}

/* ====== Interaksi ====== */
function placeLetter(btn, ch){
  const target = slots.find(s => s.textContent==='');
  if(!target) return;
  target.textContent = ch;
  btn.classList.add('disabled'); btn.dataset.used = "1";
  updateSubmitState();
}

btnUndo.onclick = ()=>{
  for(let i=slots.length-1; i>=0; i--){
    const s = slots[i];
    if(s.textContent!==''){
      const ch = s.textContent; s.textContent = '';
      const btn = [...elLetters.children].find(b => b.textContent===ch && b.dataset.used==="1");
      if(btn){ btn.classList.remove('disabled'); btn.dataset.used=""; }
      break;
    }
  }
  updateSubmitState();
};

btnSkip.onclick = ()=>{
  // tampilkan jawaban benar, lanjut (tanpa poin)
  const answer = levels[idx].a.toUpperCase().replace(/\s+/g,'');
  showCorrectThenNext(answer);
};

btnSubmit.onclick = ()=>{
  if(btnSubmit.disabled) return; // safety
  const L = levels[idx];
  const formed = slots.map(s => s.textContent).join('');
  const answer = L.a.toUpperCase().replace(/\s+/g,'');

  if(formed === answer){
    score += 20;
    elScore.textContent = `Skor: ${score}`;
    flash(elAnswer,'rgba(54,211,153,.35)');
    setTimeout(nextLevel, 450);
  }else{
    // salah â†’ tidak dapat poin, tampilkan jawaban, lanjut
    showCorrectThenNext(answer);
  }
};

function showCorrectThenNext(answer){
  slots.forEach((s,i)=> s.textContent = answer[i] || '');
  flash(elAnswer,'rgba(240,68,56,.35)');
  setTimeout(nextLevel, 900);
}

/* ====== Helpers ====== */
function flash(el, color){
  el.style.boxShadow = `0 0 0 9999px ${color} inset`;
  setTimeout(()=> el.style.boxShadow = '', 220);
}
function nextLevel(){
  idx++;
  if(idx >= levels.length){
    elFinal.textContent = `${score}`;
    elEnd.style.display = 'grid';
  }else{
    renderLevel();
  }
}
btnReplay.onclick = ()=>{
  const fresh = shuffle([...QUESTION_POOL]).slice(0,5);
  levels.splice(0, levels.length, ...fresh);
  idx = 0; score = 0;
  elEnd.style.display = 'none';
  renderLevel();
};

/* Start */
renderLevel();
addEventListener('resize', ()=> {
  const a = levels[idx].a.toUpperCase().replace(/\s+/g,'');
  setSlotSizeForOneRow(a.length);
});
</script>
</body>
</html>
